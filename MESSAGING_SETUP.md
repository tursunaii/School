# Настройка системы сообщений SmartSchool.KG

## Обзор

Система сообщений реализована с использованием Firebase Firestore для хранения данных в реальном времени. Она поддерживает:

- Отправку и получение сообщений в реальном времени
- Отображение сообщений в виде "пузырей"
- Автоматическую прокрутку к новым сообщениям
- Уведомления о новых сообщениях
- Аутентификацию пользователей

## Требования

- Firebase проект
- Настроенный Firestore
- Интернет-соединение

## Установка

1. Установите зависимости (уже выполнено):
```bash
npm install firebase react-hot-toast
```

2. Создайте проект Firebase:
   - Перейдите на [Firebase Console](https://console.firebase.google.com/)
   - Создайте новый проект
   - Включите Firestore Database

3. Получите конфигурацию Firebase:
   - В Firebase Console перейдите в "Настройки проекта"
   - Скопируйте конфигурацию веб-приложения
   - Вставьте в файл `src/config/firebase.ts`

4. Настройте правила Firestore:
   - В Firebase Console перейдите в "Firestore Database" → "Правила"
   - Установите следующие правила:

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /chats/{chatId} {
      allow read, write: if request.auth != null;
      
      match /messages/{messageId} {
        allow read, write: if request.auth != null;
      }
    }
  }
}
```

## Структура данных

### Чаты
```
chats/{chatId}
```

### Сообщения
```
chats/{chatId}/messages/{messageId}
```

Поля сообщения:
- `text` (string): Текст сообщения
- `senderId` (string): ID отправителя
- `senderName` (string): Имя отправителя
- `senderAvatar` (string, опционально): Аватар отправителя
- `timestamp` (timestamp): Время отправки
- `isRead` (boolean): Прочитано ли сообщение

## Использование

1. Пользователи могут отправлять сообщения через интерфейс чата
2. Сообщения отображаются в реальном времени для всех участников
3. Новые сообщения от других пользователей показывают уведомления
4. Интерфейс адаптирован для мобильных устройств

## Возможности для расширения

- Удаление сообщений
- Отправка изображений и файлов
- Индикатор "печатает..."
- История сообщений при офлайн-доступе
- Групповые чаты

## Технические детали

- Использует Firebase Firestore для хранения данных
- Реализует аутентификацию через анонимный вход
- Поддерживает автоматическую прокрутку к новым сообщениям
- Использует Redux для получения данных пользователя
- Реализует уведомления через react-hot-toast